<!DOCTYPE html>
#{include file="header.html"}#
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-sm-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5><i class="fa fa-home"></i>数据库备份</h5>
          <div class="ibox-tools"> <a href="#{$smarty.const.ACT}#/sysmanage/SysData/sys_data_back/" >
            <button type="button" class="btn btn-xs btn-primary"> 数据库备份</button>
            </a> <a href="#{$smarty.const.ACT}#/sysmanage/SysData/sys_data_res/">
            <button type="button" class="btn btn-xs btn-danger"> 数据库还原</button>
            </a> </div>
        </div>
        <div class="ibox-content">
          <form class="form-horizontal" method="post" action="#{$smarty.const.ACT}#/sysmanage/SysData/sys_data_back_done/" target="impordframe" name="myform">
            <div class="panel panel-default">
              <div class="panel-heading"> 要备份的数据库表 </div>
              <div class="panel-body">
                <div class="row"> #{foreach from=$list key=k item=v}#
                  <div class="col-sm-3">
                    <input type="checkbox" name="tablearr[]" value="#{$v.name}#" checked="checked" />
                    #{$v.name}#</div>
                  #{/foreach}# </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-heading"> 数据库备份选项 </div>
              <div class="panel-body">
                <div class="form-group row">
                  <label class="col-sm-2">设置数据分卷大小(K):</label>
                  <div class="col-sm-8">
                    <input name="fsize" type="text" id="fsize" value="2048" size="6">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-sm-2">指定备份数据格式:</label>
                  <div class="col-sm-8">
                    <input name="datatype" type="radio" class="np" value="4.0" />
                    MySQL3.x/4.0.x 版本
                    <input type="radio" name="datatype" value="4.1" class="np" checked />
                    MySQL4.1.x/5.x 版本 </div>
                </div>
                <div class="form-group row">
                  <label class="col-sm-2">备份数据库结构:</label>
                  <div class="col-sm-8">
                    <input name="isstruct" type="checkbox" class="np" id="isstruct" value="1" checked="1">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-sm-2">数据单次备份条数:</label>
                  <div class="col-sm-8">
                    <input name="psize" type="text" id="psize" value="100000" size="6">
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-4">
                    <button class="btn  btn-w-m btn-info" type="submit">开始备份数据</button>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <div class="panel panel-default">
            <div class="panel-heading"> 进行状态 </div>
            <div class="panel-body">
              <iframe name="impordframe" src="" width="100%" height="100%" allowtransparency="true" frameborder="0"> </iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 全局js --> 
<script src="#{$smarty.const.APP}#/View/template/js/jquery.min.js?v=2.1.4"></script> 
<script src="#{$smarty.const.APP}#/View/template/js/bootstrap.min.js?v=3.3.6"></script> 
<script src="#{$smarty.const.APP}#/View/template/js/plugins/jeditable/jquery.jeditable.js"></script> 
<!-- Data Tables --> 
<script src="#{$smarty.const.APP}#/View/template/js/plugins/dataTables/jquery.dataTables.js"></script> 
<script src="#{$smarty.const.APP}#/View/template/js/plugins/dataTables/dataTables.bootstrap.js"></script> 
<!-- 自定义js --> 
<script src="#{$smarty.const.APP}#/View/template/js/content.js?v=1.0.0"></script>
</body>


</html>
